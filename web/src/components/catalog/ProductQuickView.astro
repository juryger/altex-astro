---
import { Image } from 'astro:assets';
import type { Product } from '@/web/src/core/models/product';
import ModalDialog from '../ModalDialog.astro';
import ProductDetails from './ProductDetails.astro';
import { DialogActionButtons, DialogSize } from '@/web/src/core/const';
import type { Catalog } from '@/lib/domain/';

interface Props {
  item: Product;
  references: Catalog;
}
const { item, references } = Astro.props;

const nameProductDialogId = `product-preview-${item.id}`;

const titleQuickView = "Просмотр";
---

<figure class="aspect-square w-full object-cover group-hover:opacity-90 lg:aspect-auto h-[150px]">
  <Image src={item.thumbnailImageUrl} alt={item.title} width="150" height="150" class="rounded-xl" />
  <div class="absolute inset-s-10 inset-e-10 flex items-start p-4">
    <button type="button" class="flex flex-row gap-1 justify-center cursor-pointer outline-none relative z-10 w-full rounded-md bg-white/75 px-4 py-2 text-sm text-gray-900 opacity-0 group-hover:opacity-100 focus:opacity-100"
      onclick=`document.getElementById("${nameProductDialogId}").showModal()`>
      <span>{titleQuickView}</span>
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
        <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 19.5 15-15m0 0H8.25m11.25 0v11.25" />
      </svg>
    </button>
  </div>
</figure>
<ModalDialog id={nameProductDialogId} title={item.title} size={DialogSize.Large} actionButtons={DialogActionButtons.OK}>
  <ProductDetails item={item} references={references} isPreview={true} />
</ModalDialog>

